<link rel="import" href="/assets/elements/login-form.html">

<div class="container">
	<div class="col-md-4"></div>
	<div class="col-md-4">
		<login-form></login-form>
		<span id="signinButton"> <span class="g-signin"
			data-callback="signinCallback"
			data-clientid="747624574509-i6nesa9okgcdaiuennf9qfcp2m69long.apps.googleusercontent.com"
			data-cookiepolicy="single_host_origin"
			data-requestvisibleactions="http://schema.org/AddAction"
			data-scope="https://www.googleapis.com/auth/plus.login"> </span>
		</span>
		<span>
			<input id="logout" type="button" value="logout" onclick="logout();" />
		</span>
	</div>
</div>

<script>
	$(document).ready(function() {
		$.getScript("https://apis.google.com/js/client:platform.js");		
	});
	function signinCallback(authResult) {
		if (authResult['status']['signed_in']) {
			// Update the app to reflect a signed in user
			// Hide the sign-in button now that the user is authorized, for example:
			document.getElementById('signinButton').setAttribute('style',
					'display: none');
			alert("signed in");
		}
		else {
			if(authResult['error']['user_signed_out']){
				document.getElementById('signinButton').setAttribute('style',
				'display: none');
				alert("logged out");
			}
			// Update the app to reflect a signed out user
			// Possible error values:
			//   "user_signed_out" - User is signed-out
			//   "access_denied" - User denied access to your app
			//   "immediate_failed" - Could not automatically log in the user
			console.log('Sign-in state: ' + authResult['error']);
		}
	}
	function logout() {
		gapi.auth.signOut();
	}
</script>